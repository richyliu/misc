<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />

    <title>Squaw &amp; Alpine</title>

    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="transparent" name="apple-mobile-web-app-status-bar-style" />
    <link href="favicons/apple-touch-icon-76x76.png" rel="apple-touch-icon-precomposed" sizes="76x76" />
    <link href="favicons/apple-touch-icon-180x180.png" rel="apple-touch-icon-precomposed" sizes="120x120" />
    <link href="favicons/apple-touch-icon-152x152.png" rel="apple-touch-icon-precomposed" sizes="152x152" />

    <style media="screen">
        iframe {
            border: none;
            width: 100%;
            height: 500px;
        }
        
        .rotate-image-wrapper {
            overflow: scroll;
        }
        
        button {
            width: 150px;
            height: 100px;
            font-size: 40pt;
            border-color: black;
        }
    </style>
</head>

<body>
    <h1>Maps</h1>
    <h2>Last updated: <span id="map-last-update"></span></h2>
    
    <button type="button" onclick="$('#maps').toggle()">Show</button>
    <div id="maps">
        <h2>Squaw</h2>
        <button type="button" onclick="$('#squawMap').toggle()">Load</button>
        <div id="squawMap" style="display: none">
            <img src="img/squawMap.jpg" style="width:100%"/>
        </div>
        <h2>Alpine</h2>
        <button type="button" onclick="$('#alpineMap').toggle()">Load</button>
        <div id="alpineMap" style="display: none">
            <img src="img/alpineMap.jpg" style="width:100%"/>
        </div>
        
        <div id="lifts">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="lift-body"></tbody>
            </table>
        </div>
    </div>


    <h1>Cameras</h1>
    <h2>Last updated: <span id="camera-last-update"></span></h2>
    
    <button type="button" onclick="$('#cameras').toggle()">Show</button>
    <div id="cameras">
        <h2>Squaw 360 Camera</h2>
        <button type="button" onclick="$('#squaw360').attr('src', 'img/squaw360.jpg')">Load</button>
        <div class="rotate-image-wrapper">
            <img id="squaw360" class="rotate-image" src=""/>
        </div>
        <h2>Alpine 360 Camera</h2>
        <button type="button" onclick="$('#alpine360').attr('src', 'img/alpine360.jpg')">Load</button>
        <div class="rotate-image-wrapper">
            <img id="alpine360" class="rotate-image" src="" />
        </div>

        <h2>Squaw High Camera</h2>
        <button type="button" onclick="$('#squawHigh').attr('src', 'img/squawHigh.jpg')">Load</button>
        <img id="squawHigh" src="" style="width:100%" />
        <h2>Squaw Base Camera</h2>
        <button type="button" onclick="$('#squawBase').attr('src', 'img/squawBase.jpg')">Load</button>
        <img id="squawBase" src="" style="width:100%" />
        <h2>Alpine Base Camera</h2>
        <button type="button" onclick="$('#alpineBase').attr('src', 'img/alpineBase.jpg')">Load</button>
        <img id="alpineBase" src="" style="width:100%" />
    </div>
    
    <script src="jquery.min.js" charset="utf-8"></script>
    <script>
        $.get('update.info', res => $('#camera-last-update').html(res));
        
        $.get('lift.info', res => {
            res = JSON.parse(res);
            window.res = res;
            
            const squawLifts = res.squaw.front.lifts;
            for (const lift of squawLifts) {
                $('#lift-body').append(`
                    <tr>
                        <td>${lift.name}</td>
                        <td>${lift.status}</td>
                    </tr>
                `);
            }
            
            const alpineLifts = res.alpine.front.lifts.concat(res.alpine.back.lifts);
            for (const lift of alpineLifts) {
                $('#lift-body').append(`
                    <tr>
                        <td>${lift.name}</td>
                        <td>${lift.status || 'CLOSED'}</td>
                    </tr>
                `);
            }
        });
    </script>
</body>

</html>