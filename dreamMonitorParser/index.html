<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="Chart.bundle.min.js"></script>


<!--<div id="container" style="min-width: 310px; height: 450px; margin: 0 auto"></div>-->

<div style="width: 800px; height: 400px">
    <canvas id="myChart"></canvas>
</div>


<script>
    /* global $ */
    
    
    Date.prototype.add = function(milliseconds) {
        return this.setMilliseconds(this.getMilliseconds() + milliseconds);
    };
    
    
    var startingDate = new Date(2000, 0, 1, 10, 45, 11);
    var dates = [];
    var data = [4, 2, 3, 3, 2, 1];
    
    for (var i = 0; i < data.length; i++) {
        dates.push(startingDate.add(200));
    }
    
    console.log(dates);
    
    var ctx = document.getElementById("myChart");
    var scatterChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: dates,
            datasets: [{
                label: 'acceleration',
                data: data
            }]
        },
        options: {
            scales: {
                xAxes: [{
                    type: 'time',
                    time: {
                        unit: 'second'
                    }
                }]
            }
        }
    });

    
    
    throw '';
    $.get('data.txt', function(resp) {
        var data = resp.split('\n');
        var timestamp = eval(data[0]);
        var gyroX = [];
        var gyroY = [];
        var gyroZ = [];
        var acc = [];
        var genMov = [];
        
        for (var i = 1; i < data.length; i++) {
            var split = data[i].split(',');
            
            // ignore accelerometer data if all other data are 0
            if (data[i] === '-' || data[i].slice(-6) == ',0,0,0') {
                split = ['0', '0', '0', '0'];
                genMov.push(-1);
            } else {
                genMov.push(1);
            }
            
            acc.push(parseInt(split[0]));
            gyroX.push(parseInt(split[1]));
            gyroY.push(parseInt(split[2]));
            gyroZ.push(parseInt(split[3]));
        }
        
        acc = [];
        // gyroX = [];
        // gyroY = [];
        // gyroZ = [];
        // genMov = [];
        
        
        $('#container').highcharts({
            chart: {
                zoomType: 'x'
            },
            title: {
                text: 'Movement',
                x: -20 //center
            },
            xAxis: {
                type: 'datetime'
            },
            yAxis: [{
                title: {
                    text: 'Gyro Movement'
                },
                min: -400,
                max: 400,
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },{
                title: {
                    text: 'Accelerometer Movement',
                },
                min: -101,
                max: 101,
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#208080'
                }]
            },{
                title: {
                    text: 'General Movement',
                },
                min: -3,
                max: 3,
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#508080'
                }]
            }],
            series: [{
                name: 'accelerometer z',
                data: acc,
                yAxis: 1,
                pointStart: timestamp,
                pointInterval: 200 // 0.2 seconds
            }, {
                name: 'gyroscope x',
                data: gyroX,
                pointStart: timestamp,
                pointInterval: 200 // 0.2 seconds
            }, {
                name: 'gyroscope y',
                data: gyroY,
                pointStart: timestamp,
                pointInterval: 200 // 0.2 seconds
            }, {
                name: 'gyroscope z',
                data: gyroZ,
                pointStart: timestamp,
                pointInterval: 200 // 0.2 seconds
            }, {
                name: 'combined',
                yAxis: 2,
                data: genMov,
                pointStart: timestamp,
                pointInterval: 200 // 0.2 seconds
            }]
        });
    });
</script>